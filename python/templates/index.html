<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Git Mirror Runner Dashboard</title>
  <!-- Use Flask's url_for to reference CSS -->
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  <!-- Include external JS libraries -->
  <script src="{{ url_for('static', filename='jquery.min.js') }}"></script>
  <script src="{{ url_for('static', filename='bootstrap.bundle.min.js') }}"></script>
  <!-- Reference the external JavaScript file -->
  <script src="{{ url_for('static', filename='script.js') }}"></script>
</head>
<body>
  <div class="container">
    <h1>Git Mirror Runner Dashboard</h1>
    
    <!-- Enqueue New Repository -->
    <section id="enqueue">
      <h2>Add Repository</h2>
      <form id="enqueueForm">
        <label for="git_uri">Git Repository (HTTPS):</label>
        <input type="text" id="git_uri" name="git_uri" placeholder="https://github.com/username/repository.git" required>
        <button type="submit">Enqueue Repository</button>
      </form>
    </section>
    
    <!-- Current Running Task -->
    <section id="currentTask">
      <h2>Current Running Task</h2>
      <div id="currentTaskInfo">
        <p>No task is currently running.</p>
      </div>
      <button id="killTaskBtn" style="display:none;">Kill Running Task</button>
    </section>
    
    <!-- Pending Tasks Queue -->
    <section id="queue">
      <h2>Pending Tasks Queue</h2>
      <table id="queueTable">
        <thead>
          <tr>
            <th>Task ID</th>
            <th>Repository</th>
            <th>Created At</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <!-- Filled dynamically by script.js -->
        </tbody>
      </table>
    </section>
    
    <!-- Finished/Failed Tasks -->
    <section id="finished">
      <h2>Finished / Failed Tasks</h2>
      <table id="finishedTable">
        <thead>
          <tr>
            <th>Task ID</th>
            <th>Repository</th>
            <th>Status</th>
            <th>Started At</th>
            <th>Finished At</th>
            <th>Logs</th>
          </tr>
        </thead>
        <tbody>
          <!-- Filled dynamically by script.js -->
        </tbody>
      </table>
    </section>
    
    <!-- Logs Viewer -->
    <section id="logsViewer">
      <h2>Logs Viewer</h2>
      <select id="logTaskSelect">
        <option value="">Select a task</option>
      </select>
      <div id="logs"></div>
    </section>
  </div>
</body>
</html>
